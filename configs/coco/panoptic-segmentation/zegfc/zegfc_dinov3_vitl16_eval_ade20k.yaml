_BASE_: ../maskformer2_R50_bs16_50ep.yaml
MODEL:
  META_ARCHITECTURE: "FCCLIP"
  SEM_SEG_HEAD:
    NAME: "FCCLIPHead"
    IN_FEATURES: ["res4"]
    DEFORMABLE_TRANSFORMER_ENCODER_IN_FEATURES: ["res4"]
    DEFORMABLE_TRANSFORMER_ENCODER_OUT_FEATURES: 1
    COMMON_STRIDE: 16
    TRANSFORMER_ENC_LAYERS: 0
  # backbone part.
  BACKBONE:
    NAME: "DINOv3"
  WEIGHTS: ""
  PIXEL_MEAN: [122.7709383, 116.7460125, 104.09373615]
  PIXEL_STD: [68.5005327, 66.6321579, 70.32316305]
  ZEG_FC:
    USE_RELATIONSHIP_DESCRIPTOR: True
    TEXT_ATTN: True
    TEXT_ATTN_CLS: True
    MEM_ATTN_MASK: False
  FC_CLIP:
    DINOV3_BACKBONE_PATH: "https://dinov3.llamameta.net/dinov3_vitl16/dinov3_vitl16_pretrain_lvd1689m-8aa4cbdd.pth?Policy=eyJTdGF0ZW1lbnQiOlt7InVuaXF1ZV9oYXNoIjoib2Nscndwa2JnbmNxMm1qejB1YXQ2eThzIiwiUmVzb3VyY2UiOiJodHRwczpcL1wvZGlub3YzLmxsYW1hbWV0YS5uZXRcLyoiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE3NTgxOTI2MzF9fX1dfQ__&Signature=VjjvIjoU7vhAfXU3NR-uxxbRyQ7ikhRLxYfNneZGpciEf9S61Q5j-aZavNKdoBH1dg36X-sxtQHKQBIKHnx1Hd6uxPTMdC4yghT9NaFDtnL8lgYbkrh160P25Vt2eyKTaXiJaS1pTMIh98coR3j5Dq4BIt9P52fWrwrNkzTAoeaQe8SFteuBeKgr2P7VrRscRvAVxTT6ARX-c4CG9LyvpJ9RX2ArFB82PI3WRRYU1M0VLJesBa1kDrv0irblGNQMP%7EO6EajYYoMyuww%7EE5rplK8EW6UaON43gUf7NkmNE8rHqpUhBH9gRVYCywA6BLeNi4Pe33QlCTmfdxQY16lvTg__&Key-Pair-Id=K15QRJLYKIFSLZ&Download-Request-ID=1514661533022617"
    DINOV3_ADAPTER_PATH: "https://dinov3.llamameta.net/dinov3_vitl16/dinov3_vitl16_dinotxt_vision_head_and_text_encoder-a442d8f5.pth?Policy=eyJTdGF0ZW1lbnQiOlt7InVuaXF1ZV9oYXNoIjoib2Nscndwa2JnbmNxMm1qejB1YXQ2eThzIiwiUmVzb3VyY2UiOiJodHRwczpcL1wvZGlub3YzLmxsYW1hbWV0YS5uZXRcLyoiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE3NTgxOTI2MzF9fX1dfQ__&Signature=VjjvIjoU7vhAfXU3NR-uxxbRyQ7ikhRLxYfNneZGpciEf9S61Q5j-aZavNKdoBH1dg36X-sxtQHKQBIKHnx1Hd6uxPTMdC4yghT9NaFDtnL8lgYbkrh160P25Vt2eyKTaXiJaS1pTMIh98coR3j5Dq4BIt9P52fWrwrNkzTAoeaQe8SFteuBeKgr2P7VrRscRvAVxTT6ARX-c4CG9LyvpJ9RX2ArFB82PI3WRRYU1M0VLJesBa1kDrv0irblGNQMP%7EO6EajYYoMyuww%7EE5rplK8EW6UaON43gUf7NkmNE8rHqpUhBH9gRVYCywA6BLeNi4Pe33QlCTmfdxQY16lvTg__&Key-Pair-Id=K15QRJLYKIFSLZ&Download-Request-ID=1514661533022617"
    EMBED_DIM: 2048
    GEOMETRIC_ENSEMBLE_ALPHA: 0.4
    GEOMETRIC_ENSEMBLE_BETA: 0.8
  MASK_FORMER:
    TRANSFORMER_DECODER_NAME: "MultiScaleExtendedMaskedTransformerDecoder"
    NUM_OBJECT_QUERIES: 250
    TEST:
      SEMANTIC_ON: True
      INSTANCE_ON: True
      PANOPTIC_ON: True
      OBJECT_MASK_THRESHOLD: 0.0

DATASETS:
  TRAIN: ("openvocab_coco_2017_train_panoptic_with_sem_seg",)
  TEST: ("openvocab_ade20k_panoptic_val",)
